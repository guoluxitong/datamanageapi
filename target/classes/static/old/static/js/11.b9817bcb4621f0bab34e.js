webpackJsonp([11],{"kI/j":function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=i("woOf"),l=i.n(a),n=i("b7kB"),s={data:function(){return{list:null,listQuery:{total:50,pageNum:1,pageSize:5,deviceType:null},statusArray:[{value:0,label:"否"},{value:1,label:"是"}],textMap:{update:"编辑",create:"新增"},dialogStatus:"",dialogFormVisible:!1,deviceTypeFormData:{id:"",deviceType:""},rules:{deviceType:[{required:!0,message:"名称不能为空",trigger:"blur"}]},listLoading:!0}},created:function(){this.getList()},methods:{openTableMenu:function(e,t){this.$refs.menuContext.openTableMenu(e,t)},handleFilter:function(){this.listQuery.pageNum=1,this.getList()},getList:function(){var e=this;this.listLoading=!0,Object(n.d)(this.listQuery).then(function(t){var i=t.data.data;e.list=i.list,e.listQuery.total=i.total,e.listQuery.pageNum=i.pageNum,e.listQuery.pageSize=i.pageSize,e.listLoading=!1})},resetTemp:function(){this.deviceTypeFormData={id:"",deviceType:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.deviceTypeForm.clearValidate()})},handleUpdate:function(e){var t=this;this.deviceTypeFormData=l()({},e),this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.deviceTypeForm.clearValidate()})},editData:function(){var e=this;this.$refs.deviceTypeForm.validate(function(t){if(!t)return!1;Object(n.b)(e.deviceTypeFormData).then(function(t){e.dialogFormVisible=!1,e.$message({message:"成功",type:"success"}),e.getList()})})},handleDelete:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){console.log(e.id),Object(n.a)(e.id).then(function(i){t.$message({message:"删除成功",type:"success"}),t.list.splice(t.list.indexOf(e),1)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleSizeChange:function(e){this.listQuery.pageSize=e,this.getList()},handleCurrentChange:function(e){this.listQuery.pageNum=e,this.getList()}}},o={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"app-container"},[i("el-row",{staticClass:"app-query"},[i("el-input",{staticStyle:{width:"150px"},attrs:{placeholder:"名称"},model:{value:e.listQuery.deviceType,callback:function(t){e.$set(e.listQuery,"deviceType",t)},expression:"listQuery.deviceType"}}),e._v(" "),i("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")]),e._v(" "),i("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"primary",icon:"el-icon-edit"},on:{click:e.handleCreate}},[e._v("新增")])],1),e._v(" "),i("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"120%"},attrs:{data:e.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""},on:{"row-contextmenu":e.openTableMenu}},[i("el-table-column",{attrs:{"show-overflow-tooltip":!0,align:"left",label:"名称"},scopedSlots:e._u([{key:"default",fn:function(t){return[i("span",[e._v(e._s(t.row.deviceType))])]}}])})],1),e._v(" "),i("menu-context",{ref:"menuContext"},[i("menu-context-item",{on:{click:e.handleUpdate}},[e._v("编辑")]),e._v(" "),i("menu-context-item",{on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),i("div",{staticClass:"pagination-container"},[i("el-pagination",{attrs:{background:"","current-page":e.listQuery.pageNum,"page-sizes":[5,10,15,20],"page-size":e.listQuery.pageSize,layout:"total, sizes, prev, pager, next, jumper",total:e.listQuery.total},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1),e._v(" "),i("div",{staticClass:"el-dialog-enterprise"},[i("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"30%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[i("el-form",{ref:"deviceTypeForm",staticStyle:{width:"90%","margin-left":"15px"},attrs:{rules:e.rules,model:e.deviceTypeFormData,"label-position":"right","label-width":"80px"}},[i("el-form-item",{attrs:{label:"名称",prop:"deviceType"}},[i("el-input",{model:{value:e.deviceTypeFormData.deviceType,callback:function(t){e.$set(e.deviceTypeFormData,"deviceType",t)},expression:"deviceTypeFormData.deviceType"}})],1)],1),e._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),i("el-button",{attrs:{type:"primary"},on:{click:e.editData}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]},r=i("VU/8")(s,o,!1,null,null,null);t.default=r.exports}});
//# sourceMappingURL=11.b9817bcb4621f0bab34e.js.map