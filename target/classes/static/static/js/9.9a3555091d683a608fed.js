webpackJsonp([9],{CwSZ:function(e,t,r){"use strict";var a=r("p8xL"),i=r("XgCd"),o={brackets:function(e){return e+"[]"},indices:function(e,t){return e+"["+t+"]"},repeat:function(e){return e}},l=Date.prototype.toISOString,n={delimiter:"&",encode:!0,encoder:a.encode,encodeValuesOnly:!1,serializeDate:function(e){return l.call(e)},skipNulls:!1,strictNullHandling:!1},s=function e(t,r,i,o,l,s,c,u,d,f,p,m){var v=t;if("function"==typeof c)v=c(r,v);else if(v instanceof Date)v=f(v);else if(null===v){if(o)return s&&!m?s(r,n.encoder):r;v=""}if("string"==typeof v||"number"==typeof v||"boolean"==typeof v||a.isBuffer(v))return s?[p(m?r:s(r,n.encoder))+"="+p(s(v,n.encoder))]:[p(r)+"="+p(String(v))];var y,h=[];if(void 0===v)return h;if(Array.isArray(c))y=c;else{var b=Object.keys(v);y=u?b.sort(u):b}for(var g=0;g<y.length;++g){var w=y[g];l&&null===v[w]||(h=Array.isArray(v)?h.concat(e(v[w],i(r,w),i,o,l,s,c,u,d,f,p,m)):h.concat(e(v[w],r+(d?"."+w:"["+w+"]"),i,o,l,s,c,u,d,f,p,m)))}return h};e.exports=function(e,t){var r=e,l=t?a.assign({},t):{};if(null!==l.encoder&&void 0!==l.encoder&&"function"!=typeof l.encoder)throw new TypeError("Encoder has to be a function.");var c=void 0===l.delimiter?n.delimiter:l.delimiter,u="boolean"==typeof l.strictNullHandling?l.strictNullHandling:n.strictNullHandling,d="boolean"==typeof l.skipNulls?l.skipNulls:n.skipNulls,f="boolean"==typeof l.encode?l.encode:n.encode,p="function"==typeof l.encoder?l.encoder:n.encoder,m="function"==typeof l.sort?l.sort:null,v=void 0!==l.allowDots&&l.allowDots,y="function"==typeof l.serializeDate?l.serializeDate:n.serializeDate,h="boolean"==typeof l.encodeValuesOnly?l.encodeValuesOnly:n.encodeValuesOnly;if(void 0===l.format)l.format=i.default;else if(!Object.prototype.hasOwnProperty.call(i.formatters,l.format))throw new TypeError("Unknown format option provided.");var b,g,w=i.formatters[l.format];"function"==typeof l.filter?r=(g=l.filter)("",r):Array.isArray(l.filter)&&(b=g=l.filter);var D,x=[];if("object"!=typeof r||null===r)return"";D=l.arrayFormat in o?l.arrayFormat:"indices"in l?l.indices?"indices":"repeat":"indices";var F=o[D];b||(b=Object.keys(r)),m&&b.sort(m);for(var O=0;O<b.length;++O){var _=b[O];d&&null===r[_]||(x=x.concat(s(r[_],_,F,u,d,f?p:null,g,m,v,y,w,h)))}var S=x.join(c),j=!0===l.addQueryPrefix?"?":"";return S.length>0?j+S:""}},DDCP:function(e,t,r){"use strict";var a=r("p8xL"),i=Object.prototype.hasOwnProperty,o={allowDots:!1,allowPrototypes:!1,arrayLimit:20,decoder:a.decode,delimiter:"&",depth:5,parameterLimit:1e3,plainObjects:!1,strictNullHandling:!1},l=function(e,t,r){if(e){var a=r.allowDots?e.replace(/\.([^.[]+)/g,"[$1]"):e,o=/(\[[^[\]]*])/g,l=/(\[[^[\]]*])/.exec(a),n=l?a.slice(0,l.index):a,s=[];if(n){if(!r.plainObjects&&i.call(Object.prototype,n)&&!r.allowPrototypes)return;s.push(n)}for(var c=0;null!==(l=o.exec(a))&&c<r.depth;){if(c+=1,!r.plainObjects&&i.call(Object.prototype,l[1].slice(1,-1))&&!r.allowPrototypes)return;s.push(l[1])}return l&&s.push("["+a.slice(l.index)+"]"),function(e,t,r){for(var a=t,i=e.length-1;i>=0;--i){var o,l=e[i];if("[]"===l)o=(o=[]).concat(a);else{o=r.plainObjects?Object.create(null):{};var n="["===l.charAt(0)&&"]"===l.charAt(l.length-1)?l.slice(1,-1):l,s=parseInt(n,10);!isNaN(s)&&l!==n&&String(s)===n&&s>=0&&r.parseArrays&&s<=r.arrayLimit?(o=[])[s]=a:o[n]=a}a=o}return a}(s,t,r)}};e.exports=function(e,t){var r=t?a.assign({},t):{};if(null!==r.decoder&&void 0!==r.decoder&&"function"!=typeof r.decoder)throw new TypeError("Decoder has to be a function.");if(r.ignoreQueryPrefix=!0===r.ignoreQueryPrefix,r.delimiter="string"==typeof r.delimiter||a.isRegExp(r.delimiter)?r.delimiter:o.delimiter,r.depth="number"==typeof r.depth?r.depth:o.depth,r.arrayLimit="number"==typeof r.arrayLimit?r.arrayLimit:o.arrayLimit,r.parseArrays=!1!==r.parseArrays,r.decoder="function"==typeof r.decoder?r.decoder:o.decoder,r.allowDots="boolean"==typeof r.allowDots?r.allowDots:o.allowDots,r.plainObjects="boolean"==typeof r.plainObjects?r.plainObjects:o.plainObjects,r.allowPrototypes="boolean"==typeof r.allowPrototypes?r.allowPrototypes:o.allowPrototypes,r.parameterLimit="number"==typeof r.parameterLimit?r.parameterLimit:o.parameterLimit,r.strictNullHandling="boolean"==typeof r.strictNullHandling?r.strictNullHandling:o.strictNullHandling,""===e||null===e||void 0===e)return r.plainObjects?Object.create(null):{};for(var n="string"==typeof e?function(e,t){for(var r={},a=t.ignoreQueryPrefix?e.replace(/^\?/,""):e,l=t.parameterLimit===1/0?void 0:t.parameterLimit,n=a.split(t.delimiter,l),s=0;s<n.length;++s){var c,u,d=n[s],f=d.indexOf("]="),p=-1===f?d.indexOf("="):f+1;-1===p?(c=t.decoder(d,o.decoder),u=t.strictNullHandling?null:""):(c=t.decoder(d.slice(0,p),o.decoder),u=t.decoder(d.slice(p+1),o.decoder)),i.call(r,c)?r[c]=[].concat(r[c]).concat(u):r[c]=u}return r}(e,r):e,s=r.plainObjects?Object.create(null):{},c=Object.keys(n),u=0;u<c.length;++u){var d=c[u],f=l(d,n[d],r);s=a.merge(s,f,r)}return a.compact(s)}},LRcT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=r("woOf"),i=r.n(a),o=r("X2Oc"),l=r("xT6B"),n=r("xV2B"),s=(r("OGkF"),r("b7kB"),r("7+uW")),c=r("mtWM"),u=r.n(c),d=r("mw3O"),f=r.n(d);u.a.defaults.baseURL="http://output.sdcsoft.com.cn",s.default.prototype.$axios=u.a,u.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded; charset=UTF-8",s.default.prototype.qs=f.a;var p={data:function(){return{list:null,pageNum:1,pageSize:5,listQuery:{deviceSuffix:null,customerNo:null,enterpriseId:this.$store.state.user.orgId,status:null,runStatus:null,saleDatetime:null},customerOption:[],isOrNotArray:[{value:1,label:"是"},{value:0,label:"否"}],deviceTypeOption:[],textMap:{update:"编辑",create:"新增"},fuelArray:o.a,mediumArray:o.b,dialogStatus:"",dialogFormVisible:!1,deviceFormData:{id:"",media:"",power:"",deviceType:"",status:1,runStatus:1,saleDatetime:""},dialogQRCodeFormVisible:!1,qRCodeFormData:{startSuffix:"",endSuffix:""},qRCodeRules:{startSuffix:[{required:!0,message:"开始编号不能为空",trigger:"blur"}],endSuffix:[{required:!0,message:"结束编号不能为空",trigger:"blur"}]},deviceNoList:[],onlineList:[],listLoading:!1}},filters:{statusFilterLabel:function(e,t){return t.filter(function(t){return t.value==e})}},mounted:function(){this.timerTask()},methods:{openTableMenu:function(e,t){this.$refs.menuContext.openTableMenu(e,t)},handleFilter:function(){this.pageNum=1;for(var e=this.onlineList.length,t=[],r=0;r<e;r++)this.onlineList[r].indexOf(this.listQuery.deviceSuffix)>=0&&t.push(this.onlineList[r]);this.onlineList=[],this.onlineList=t,this.getList()},getList:function(){var e=this,t=[],r=5*(this.pageNum-1),a=5*this.pageNum-1;this.onlineList.filter(function(e,i){i>=r&&i<=a&&t.push(e)}),this.listLoading=!0,Object(n.d)(t).then(function(t){e.list=t.data.data,e.listLoading=!1})},timerTask:function(){var e=this;this.$axios({method:"get",url:"/device/online"}).then(function(t){e.deviceNoList=e.$store.state.user.deviceNoList;for(var r=0;r<t.data.length;r++)-1!=e.deviceNoList.indexOf(t.data[r])&&e.onlineList.push(t.data[r]),e.listLoading=!1;e.getList()},function(e){console.log(e)})},resetTemp:function(){this.deviceFormData={id:"",media:"",power:"",deviceType:"",status:1,runStatus:1,saleDatetime:""}},handleCreate:function(){var e=this;this.resetTemp(),this.dialogStatus="create",this.dialogFormVisible=!0,this.$nextTick(function(){e.$refs.deviceFormData.clearValidate()})},handleGenerateQRCode:function(){var e=this;this.qRCodeFormData.startSuffix="",this.qRCodeFormData.endSuffix="",this.dialogQRCodeFormVisible=!0,this.$nextTick(function(){e.$refs.qRCodeForm.clearValidate()})},handleUpdate:function(e){var t=this;this.deviceFormData=i()({},e),this.deviceFormData.saleDatetime?this.deviceFormData.saleDatetime=new Date(this.deviceFormData.saleDatetime):this.deviceFormData.saleDatetime=new Date,this.dialogStatus="update",this.dialogFormVisible=!0,this.$nextTick(function(){t.$refs.deviceFormData.clearValidate()})},generateQRCode:function(){var e=this;this.$refs.qRCodeForm.validate(function(t){if(!t)return!1;e.dialogQRCodeFormVisible=!1,window.open(Object({NODE_ENV:"production"}).BASE_API+"/device/generateqrcode?startSuffix="+e.qRCodeFormData.startSuffix+"&endSuffix="+e.qRCodeFormData.endSuffix,"_blank")})},editData:function(){var e=this;this.$refs.deviceFormData.validate(function(t){if(!t)return!1;e.deviceFormData.saleDatetime=Object(l.a)(e.deviceFormData.saleDatetime,"yyyy-MM-dd hh:mm:ss"),Object(n.b)(e.deviceFormData).then(function(t){e.dialogFormVisible=!1,e.$message({message:"成功",type:"success"})})})},handleDelete:function(e){var t=this;this.$confirm("确认删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){Object(n.a)(e.id).then(function(r){t.$message({message:"删除成功",type:"success"}),t.list.splice(t.list.indexOf(e),1)})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},handleCurrentChange:function(e){this.pageNum=e,this.getList()}}},m={render:function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("el-row",{staticClass:"app-query"},[r("el-input",{staticStyle:{width:"500px"},attrs:{clearable:"",placeholder:"设备编号"},model:{value:e.listQuery.deviceSuffix,callback:function(t){e.$set(e.listQuery,"deviceSuffix",t)},expression:"listQuery.deviceSuffix"}}),e._v(" "),r("el-button",{attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.handleFilter}},[e._v("查询")])],1),e._v(" "),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],staticStyle:{width:"120%"},attrs:{data:e.list,"element-loading-text":"给我一点时间",border:"",fit:"","highlight-current-row":""},on:{"row-contextmenu":e.openTableMenu}},[r("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"设备编号"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.deviceSuffix))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"所属客户"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.customerName))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"设备类型"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("span",[e._v(e._s(t.row.deviceType))])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"燃料"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.power?r("span",e._l(e.fuelArray,function(a){return t.row.power===a.value?r("span",[e._v(e._s(a.label))]):e._e()})):r("span",[e._v("无")])]}}])}),e._v(" "),r("el-table-column",{attrs:{align:"left","show-overflow-tooltip":!0,label:"介质"},scopedSlots:e._u([{key:"default",fn:function(t){return[null!=t.row.media?r("span",e._l(e.mediumArray,function(a){return t.row.media===a.value?r("span",[e._v(e._s(a.label))]):e._e()})):r("span",[e._v("无")])]}}])})],1),e._v(" "),r("menu-context",{ref:"menuContext"},[r("menu-context-item",{on:{click:e.handleUpdate}},[e._v("编辑")]),e._v(" "),r("menu-context-item",{on:{click:e.handleDelete}},[e._v("删除")])],1),e._v(" "),r("div",{staticClass:"pagination-container"},[r("el-pagination",{attrs:{background:"","current-page":e.pageNum,"page-size":5,layout:"total,  prev, pager, next, jumper",total:e.onlineList.length},on:{"current-change":e.handleCurrentChange}})],1),e._v(" "),r("div",{staticClass:"el-dialog-device"},[r("el-dialog",{attrs:{title:e.textMap[e.dialogStatus],visible:e.dialogFormVisible,width:"40%"},on:{"update:visible":function(t){e.dialogFormVisible=t}}},[r("el-form",{ref:"deviceFormData",staticStyle:{width:"90%","margin-left":"15px"},attrs:{model:e.deviceFormData,"label-position":"right","label-width":"80px"}},[r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"燃料"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.deviceFormData.power,callback:function(t){e.$set(e.deviceFormData,"power",t)},expression:"deviceFormData.power"}},e._l(e.fuelArray,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"介质"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},attrs:{clearable:""},model:{value:e.deviceFormData.media,callback:function(t){e.$set(e.deviceFormData,"media",t)},expression:"deviceFormData.media"}},e._l(e.mediumArray,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1)],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"设备类型"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},model:{value:e.deviceFormData.deviceType,callback:function(t){e.$set(e.deviceFormData,"deviceType",t)},expression:"deviceFormData.deviceType"}},e._l(e.deviceTypeOption,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),e.deviceFormData.id?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"是否销售"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},model:{value:e.deviceFormData.status,callback:function(t){e.$set(e.deviceFormData,"status",t)},expression:"deviceFormData.status"}},e._l(e.isOrNotArray,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1):e._e()],1),e._v(" "),r("el-row",[r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"是否运行"}},[r("el-select",{staticClass:"filter-item",staticStyle:{width:"100%"},model:{value:e.deviceFormData.runStatus,callback:function(t){e.$set(e.deviceFormData,"runStatus",t)},expression:"deviceFormData.runStatus"}},e._l(e.isOrNotArray,function(e){return r("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})}))],1)],1),e._v(" "),e.deviceFormData.id?r("el-col",{attrs:{span:12}},[r("el-form-item",{attrs:{label:"售出时间"}},[r("el-date-picker",{staticStyle:{width:"100%"},attrs:{type:"datetime","default-time":"00:00:00"},model:{value:e.deviceFormData.saleDatetime,callback:function(t){e.$set(e.deviceFormData,"saleDatetime",t)},expression:"deviceFormData.saleDatetime"}})],1)],1):e._e()],1)],1),e._v(" "),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(t){e.dialogFormVisible=!1}}},[e._v("取消")]),e._v(" "),r("el-button",{attrs:{type:"primary"},on:{click:e.editData}},[e._v("确认")])],1)],1)],1)],1)},staticRenderFns:[]},v=r("VU/8")(p,m,!1,null,null,null);t.default=v.exports},XgCd:function(e,t,r){"use strict";var a=String.prototype.replace,i=/%20/g;e.exports={default:"RFC3986",formatters:{RFC1738:function(e){return a.call(e,i,"+")},RFC3986:function(e){return e}},RFC1738:"RFC1738",RFC3986:"RFC3986"}},mw3O:function(e,t,r){"use strict";var a=r("CwSZ"),i=r("DDCP"),o=r("XgCd");e.exports={formats:o,parse:i,stringify:a}},p8xL:function(e,t,r){"use strict";var a=Object.prototype.hasOwnProperty,i=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),o=function(e,t){for(var r=t&&t.plainObjects?Object.create(null):{},a=0;a<e.length;++a)void 0!==e[a]&&(r[a]=e[a]);return r};e.exports={arrayToObject:o,assign:function(e,t){return Object.keys(t).reduce(function(e,r){return e[r]=t[r],e},e)},compact:function(e){for(var t=[{obj:{o:e},prop:"o"}],r=[],a=0;a<t.length;++a)for(var i=t[a],o=i.obj[i.prop],l=Object.keys(o),n=0;n<l.length;++n){var s=l[n],c=o[s];"object"==typeof c&&null!==c&&-1===r.indexOf(c)&&(t.push({obj:o,prop:s}),r.push(c))}return function(e){for(var t;e.length;){var r=e.pop();if(t=r.obj[r.prop],Array.isArray(t)){for(var a=[],i=0;i<t.length;++i)void 0!==t[i]&&a.push(t[i]);r.obj[r.prop]=a}}return t}(t)},decode:function(e){try{return decodeURIComponent(e.replace(/\+/g," "))}catch(t){return e}},encode:function(e){if(0===e.length)return e;for(var t="string"==typeof e?e:String(e),r="",a=0;a<t.length;++a){var o=t.charCodeAt(a);45===o||46===o||95===o||126===o||o>=48&&o<=57||o>=65&&o<=90||o>=97&&o<=122?r+=t.charAt(a):o<128?r+=i[o]:o<2048?r+=i[192|o>>6]+i[128|63&o]:o<55296||o>=57344?r+=i[224|o>>12]+i[128|o>>6&63]+i[128|63&o]:(a+=1,o=65536+((1023&o)<<10|1023&t.charCodeAt(a)),r+=i[240|o>>18]+i[128|o>>12&63]+i[128|o>>6&63]+i[128|63&o])}return r},isBuffer:function(e){return null!==e&&void 0!==e&&!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},isRegExp:function(e){return"[object RegExp]"===Object.prototype.toString.call(e)},merge:function e(t,r,i){if(!r)return t;if("object"!=typeof r){if(Array.isArray(t))t.push(r);else{if("object"!=typeof t)return[t,r];(i.plainObjects||i.allowPrototypes||!a.call(Object.prototype,r))&&(t[r]=!0)}return t}if("object"!=typeof t)return[t].concat(r);var l=t;return Array.isArray(t)&&!Array.isArray(r)&&(l=o(t,i)),Array.isArray(t)&&Array.isArray(r)?(r.forEach(function(r,o){a.call(t,o)?t[o]&&"object"==typeof t[o]?t[o]=e(t[o],r,i):t.push(r):t[o]=r}),t):Object.keys(r).reduce(function(t,o){var l=r[o];return a.call(t,o)?t[o]=e(t[o],l,i):t[o]=l,t},l)}}}});
//# sourceMappingURL=9.9a3555091d683a608fed.js.map